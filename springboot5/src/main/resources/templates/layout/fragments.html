<!DOCTYPE html>
<html xmlns="http://www.thymeleaf.org">
<head>
    <th:block th:fragment="documentHeader">
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title>Spring Boot 5</title>
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" 
            rel="stylesheet" 
            integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" 
            crossorigin="anonymous">
    </th:block>
</head>
   
<body>
    <th:block th:fragment="pageHeader(title)">
        <header class="mt-2 p-2 text-bg-primary text-center">
            <h1 th:text="${title}"></h1>
        </header>
        
        <nav class="mt-2 navbar navbar-expand-sm bg-body-tertiary">
            <div class="container-fluid">
              <a class="navbar-brand" th:href="@{/}">Home</a>
              <button class="navbar-toggler" 
                    type="button" 
                    data-bs-toggle="collapse" 
                    data-bs-target="#navbarNav" 
                    aria-controls="navbarNav" 
                    aria-expanded="false" 
                    aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
              </button>
              <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav">
                  <li class="nav-item">
                    <a class="nav-link" th:href="@{/post/list}">포스트 목록</a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" th:href="@{/post/create}">새 포스트</a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link disabled">TODO</a>
                  </li>
                </ul>
              </div>
            </div>
        </nav>
    </th:block>

    <th:block th:fragment="pagination">
      <nav> 
        <ul class="pagination justify-content-center">
            <!-- justify-content-center 가운데 정렬 -->
          <li class="page-item" th:classappend="${!page.hasPrevious} ? 'disabled'"> <!--- 이전 페이지가 없다면 'disabled' -->
            <a class="page-link" th:href="@{${baseUrl}(p=${page.number - 1}, category=${param.category}, keyword=${param.keyword})}">이전</a><!-- @{|?p=${.number -1}|}에서 ?p= requestparam을 p로 만들겠다라는 뜻, 현재 페이지 -1 -->
            <!-- ${param.} 이렇게 주면 requestParam을 찾아간다. -->
          </li>
          <li class="page-item"
                  th:each="pageNo : ${#numbers.sequence(0, page.totalPages - 1, 1)}"
                  th:if="${pageNo >= page.number - 5 && pageNo < page.number + 5}"
                  th:classappend="${pageNo == page.number} ? 'active'">
              <!-- th:each부분: 0부터 시작하기 때문에 -1을 해줘야한다.마지막 1은 시퀀스의 증분값으로 1씩 증가한다.--> 
              <!-- th:if부분: 현재 페이지에서 이전으로 5개, 다음으로 4개까지 보여준다. -->
              <a class="page-link"
                  th:href="@{${baseUrl}(p=${pageNo}, category=${param.category}, keyword=${param.keyword})}"
                  th:text="${pageNo + 1}"></a>
        </li>
        <li class="page-item"
        
            th:classappend="${!page.hasNext} ? 'disabled'">
            <a class="page-link"
                th:href="@{${baseUrl}(p=${page.number + 1}, category=${param.category}, keyword=${param.keyword})}">다음</a>
        </li>
        </ul>
      </nav>
    </th:block>
    
    <th:block th:fragment="bootstrapJS">
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" 
            integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" 
            crossorigin="anonymous"></script>
    </th:block>
</body>
</html>